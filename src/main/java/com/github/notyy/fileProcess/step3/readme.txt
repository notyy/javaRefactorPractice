process delta update and full update